
<polymer-element name="mediascape-trainMetadata" extends="component-query" attributes="icon">
<template>
  <style>
  :host {
    display: block;
  }
  @media (min-width:90px) and (max-width:190px){

     #infographics {
   font-family: sans-serif;
    background-color:white;
   opacity:1;
   color:black;
   width:100%;
   height:100%;
   font-size: 100%; 
   border:solid 1px;

 }
 
 .title{
    position:relative;
    width:50%;
    height:20%;
    color:#191970;
    font-weight: bold;
    font-size: 15px;
    margin-left: 25%;
    text-align:center;
    top:10%;
 }
 #eta{
   position:relative;
    width:50%;
    height:20%;
    color:#191970;
    font-weight: bold;
    font-size: 15px;
    margin-left: 25%;
    text-align:center;
    top:10%;
 }

}
  @media (min-width:150px) and (max-width:340px){

   #infographics {
   font-family: sans-serif;
    background-color:white;
   opacity:1;
   color:black;
   width:100%;
   height:100%;
   font-size: 100%; 
   border:solid 1px;

 }
 
 .title{
    position:relative;
    width:50%;
    height:20%;
    color:#191970;
    font-weight: bold;
    font-size: 15px;
    margin-left: 25%;
    text-align:center;
    top:10%;
 }
 #eta{
   position:relative;
    width:50%;
    height:20%;
    color:#191970;
    font-weight: bold;
    font-size: 15px;
    margin-left: 25%;
    text-align:center;
    top:10%;
 }


  }
  @media (min-width:341px) and (max-width: 364px){
#infographics {
   font-family: sans-serif;
    background-color:white;
   opacity:1;
   color:black;
   width:100%;
   height:100%;
   font-size: 100%; 
   
   border:solid 1px;
 }
 
 .title{
    position:relative;
    width:50%;
    height:20%;
    color:#191970;
    font-weight: bold;
    font-size: 20px;
    margin-left: 25%;
    text-align:center;
    top:10%;
 }
 #eta{
   position:relative;
    width:50%;
    height:20%;
    color:#191970;
    font-weight: bold;
    font-size: 20px;
    margin-left: 25%;
    text-align:center;
    top:10%;
 }


  }
  @media (min-width:365px) and (max-width: 634px){

     #infographics {
   font-family: sans-serif;
    background-color:white;
   opacity:1;
   color:black;
   width:100%;
   height:100%;
   font-size: 100%; 
   
border:solid 1px;
 }
 
 .title{
    position:relative;
    width:50%;
    height:20%;
    color:#191970;
    font-weight: bold;
    font-size: 25px;
    margin-left: 25%;
    text-align:center;
    top:10%;
 }
 #eta{
   position:relative;
    width:50%;
    height:20%;
    color:#191970;
    font-weight: bold;
    font-size: 25px;
    margin-left: 25%;
    text-align:center;
    top:10%;
 }



  }
  @media (min-width:635px) and (max-width: 650px){

     #infographics {
   font-family: sans-serif;
    background-color:white;
   opacity:1;
   color:black;
   width:100%;
   height:100%;
   font-size: 100%; 
   border:solid 1px;

 }
 
 .title{
    position:relative;
    width:50%;
    height:20%;
    color:#191970;
    font-weight: bold;
    font-size: 30px;
    margin-left: 25%;
    text-align:center;
    top:10%;
 }
 #eta{
   position:relative;
    width:50%;
    height:20%;
    color:#191970;
    font-weight: bold;
    font-size: 30px;
    margin-left: 25%;
    text-align:center;
    top:10%;
 }


  }
  @media (min-width:651px) and (max-width: 749px){
  #infographics {
   font-family: sans-serif;
    background-color:white;
   opacity:1;
   color:black;
   width:100%;
   height:100%;
   font-size: 100%; 
   

 }
 
 .title{
    position:relative;
    width:50%;
    height:20%;
    color:#191970;
    font-weight: bold;
    font-size: 40px;
    margin-left: 25%;
    text-align:center;
    top:10%;
 }
 #eta{
   position:relative;
    width:50%;
    height:20%;
    color:#191970;
    font-weight: bold;
    font-size: 40px;
    margin-left: 25%;
    text-align:center;
    top:10%;

 }

  }
@media (min-width:750px){
#infographics {
   font-family: sans-serif;
    background-color:white;
   opacity:1;
   color:black;
   width:100%;
   height:100%;
   font-size: 100%; 
   border:solid 1px;

 }
 
 .title{
    position:relative;
    width:50%;
    height:20%;
    color:#191970;
    font-weight: bold;
    font-size: 40px;
    margin-left: 25%;
    text-align:center;
    top:10%;
    
 }
 #eta{
   position:relative;
    width:50%;
    height:20%;
    color:#191970;
    font-weight: bold;
    font-size: 40px;
    margin-left: 25%;
    text-align:center;
     top:10%;

 }
}


  </style>
<body>
<div id="infographics" class="infographics">
  
  <img src='nextstation.png' style='position:relative;top:10%;width:auto;height:25%;margin-left:auto;margin-right:auto;display:block;'>
 <div class="title"   id="nextstation"></div>
 <div id="eta"></div>

</div>


</template>


<script src="next_stations.js"></script>

<script>


Polymer('mediascape-trainMetadata', {
  p:null,
  eta:null,
  created: function() {
    console.log('Train controller component loaded')
  },

  ready: function() {

    document.addEventListener ('motion-ready',this.smReady.bind(this));
    this.p = parser();
    this.p.parse(next_stations);
  },
  smReady:function(){
    this.sm = mediascape.Communication.sharedmotion();
    this.sm.addMovingCursor (this.p);
    this.sm.cursor.on("change",this.cursorChange.bind(this));
    this.sm.mapp.motions.shared.on("timeupdate",this.timeChange.bind(this));

  },
  cursorChange:function(e){
     this.$.nextstation.innerHTML = e.value.entry.name;
     this.eta = e.value.end;
  },
  timeChange:function(e){
    if (this.eta != null && this.eta != Infinity) {
      this.$.eta.innerHTML = this.prettyPrint(this.eta - e.pos);
    } else {
      this.$.eta.innerHTML="";
    }
  },

  beginning:function(){
    this.sm.mapp.motions.shared.update(0);
  },
  prettyPrint:function(val){
    // Convert time in seconds to X days, hours, minutes, seconds
    var days = Math.floor(val / (60 * 60 * 24));
    var hours = Math.floor((val - days * (60 * 60 * 24)) / (60 * 60));
    var mins = Math.floor((val - days * (60 * 60 * 24) - hours * (60 * 60)) / (60));
    var secs = Math.floor((val - days * (60 * 60 * 24) - hours * (60 * 60)) - mins * 60);
    var s = "";
    if (days > 1) s = days + " days ";
    else if (days > 0) s = days + " day ";
    if (hours > 1) s += hours + " hours ";
    else if (hours > 0) s += hours + " hour ";
    if (mins > 1) s += mins + " mins ";
    else if (mins > 0) s += mins + " min ";
    if (secs > 1) s += secs + " secs ";
    else s += secs + " sec ";
    return s;
  }

});
  </script>
 </polymer-element>
